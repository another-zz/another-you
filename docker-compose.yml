version: '3.8'

services:
  minecraft:
    # 使用自建镜像，禁用自动下载
    build:
      context: .
      dockerfile: Dockerfile.mc
    container_name: another-you-mc
    ports:
      - "25565:25565"
    environment:
      EULA: "TRUE"
      TYPE: "PAPER"
      VERSION: "1.20.4"
      DIFFICULTY: "normal"
      MODE: "survival"
      MOTD: "AnotherYou - AI数字分身世界"
      MAX_PLAYERS: 100
      VIEW_DISTANCE: 10
      ENABLE_COMMAND_BLOCK: "true"
      SPAWN_PROTECTION: 0
    volumes:
      - ./world/minecraft:/data
    restart: unless-stopped
    
  web:
    image: nginx:alpine
    container_name: another-you-web
    ports:
      - "8080:80"
    volumes:
      - ./ui/web:/usr/share/nginx/html:ro
