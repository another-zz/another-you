version: '3.8'

services:
  minecraft:
    image: itzg/minecraft-server:latest
    container_name: another-you-mc
    ports:
      - "25565:25565"
    environment:
      EULA: "TRUE"
      TYPE: "PAPER"
      VERSION: "1.20.4"
      DIFFICULTY: "normal"
      MODE: "survival"
      MOTD: "AnotherYou - AI数字分身世界"
      MAX_PLAYERS: 100
      VIEW_DISTANCE: 10
      ENABLE_COMMAND_BLOCK: "true"
      SPAWN_PROTECTION: 0
      # 禁用自动下载配置
      SKIP_GENERIC_PACK_UPDATE_CHECK: "true"
    volumes:
      - ./world/minecraft:/data
      # 预置配置文件，避免下载
      - ./config/paper-global.yml:/config/paper-global.yml:ro
      - ./config/paper-world-defaults.yml:/config/paper-world-defaults.yml:ro
    restart: unless-stopped
    
  web:
    image: nginx:alpine
    container_name: another-you-web
    ports:
      - "8080:80"
    volumes:
      - ./ui/web:/usr/share/nginx/html:ro
